name: Cloudflare DNS Update Wrapper

on:
  workflow_dispatch:
    inputs:
      domain:
        description: Root domain to update (e.g., example.org)
        required: true
        type: string
      pages_host:
        description: GitHub Pages hostname (e.g., freeforcharity.github.io)
        required: true
        type: string
      mode:
        description: Update mode
        required: true
        type: choice
        options:
          - github-pages-a-aaaa
          - apex-cname
          - revert-apex-a
      apex_a:
        description: IPv4 for revert-apex-a mode (e.g., 204.44.192.77)
        required: false
        type: string
      purge:
        description: Purge other A/CNAME (keep apex/www/staging)
        required: false
        type: boolean
      apply:
        description: Apply changes (default: dry-run)
        required: false
        type: boolean
        default: false

jobs:
  call-dns-update:
    uses: FreeForCharity/FFC-Cloudflare-Automation-/.github/workflows/cloudflare-dns.yml@main
    secrets: inherit
    with:
      domain: ${{ inputs.domain }}
      pages_host: ${{ inputs.pages_host }}
      mode: ${{ inputs.mode }}
      apex_a: ${{ inputs.apex_a }}
      purge: ${{ inputs.purge }}
      apply: ${{ inputs.apply }}